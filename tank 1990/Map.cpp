#include "Map.h"

// สร้างแผนที่ใหม่และสุ่มวางกำแพง (#) สำหรับด่านที่ระบุ
void Map::generate(int level) {
    // เคลียร์แผนที่ด้วยช่องว่าง ' '
    for (int y = 0; y < ความสูง; ++y) {
        for (int x = 0; x < ความกว้าง; ++x) {
            grid[y][x] = ' ';
        }
    }
    // สร้างขอบเขตแผนที่ด้วยกำแพง (ขอบบน, ขอบล่าง, ซ้าย, ขวา)
    for (int x = 0; x < ความกว้าง; ++x) {
        grid[0][x] = '#';
        grid[ความสูง-1][x] = '#';
    }
    for (int y = 0; y < ความสูง; ++y) {
        grid[y][0] = '#';
        grid[y][ความกว้าง-1] = '#';
    }
    // วางกำแพงแบบสุ่มในพื้นที่ภายใน (ไม่รวมขอบ)
    int wallChance = 6; // กำหนดโอกาสการเกิดกำแพง (1 ใน 6 ≈ 16%)
    if (level > 1) {
        // อาจเพิ่มความหนาแน่นของกำแพงในเลเวลสูงขึ้น (ลดค่านี้เพื่อเพิ่ม % กำแพง)
        wallChance = 5;
    }
    for (int y = 1; y < ความสูง-1; ++y) {
        for (int x = 1; x < ความกว้าง-1; ++x) {
            if (rand() % wallChance == 0) {
                grid[y][x] = '#';
            } else {
                grid[y][x] = ' ';
            }
        }
    }
}
